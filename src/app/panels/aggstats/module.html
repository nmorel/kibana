<div ng-controller='aggstats' ng-init="init()">
  <style>
    .terms-wrapper {
      display: table;
      width: 100%;
    }
  </style>

  <div class="terms-wrapper">

    <!-- TABLE -->
    <table ng-style="panel.style" class="table table-striped table-condensed">
      <thead>
        <th>Service</th>
        <th style="text-align: right">Count</th>
        <th style="text-align: right">Sum</th>
        <th style="text-align: right">Average</th>
        <th style="text-align: right">Min</th>
        <th style="text-align: right">Max</th>
        <th style="text-align: right" ng-if="panel.percentile">50 pct</th>
        <th style="text-align: right" ng-if="panel.percentile">75 pct</th>
        <th style="text-align: right" ng-if="panel.percentile">95 pct</th>
        <th style="text-align: right" ng-if="panel.percentile">99 pct</th>
        <th style="text-align: middle">Action</th>
      </thead>
      <tr ng-repeat="bucket in data">
        <td>{{bucket.key}}</td>
        <td style="text-align: right">{{bucket.stats.count}}</td>
        <td style="text-align: right">{{bucket.stats.sum}}</td>
        <td style="text-align: right">{{bucket.stats.avg | number : 2}}</td>
        <td style="text-align: right">{{bucket.stats.min}}</td>
        <td style="text-align: right">{{bucket.stats.max}}</td>
        <td style="text-align: right" ng-if="panel.percentile">{{bucket.percentiles.values['50.0'] | number : 2}}</td>
        <td style="text-align: right" ng-if="panel.percentile">{{bucket.percentiles.values['75.0'] | number : 2}}</td>
        <td style="text-align: right" ng-if="panel.percentile">{{bucket.percentiles.values['95.0'] | number : 2}}</td>
        <td style="text-align: right" ng-if="panel.percentile">{{bucket.percentiles.values['99.0'] | number : 2}}</td>
        <td style="text-align: middle">
        <span>
          <i class='icon-search pointer' ng-click="build_search(bucket.key)"></i>
          <i class='icon-ban-circle pointer' ng-click="build_search(bucket.key,true)"></i>
        </span>
        </td>
      </tr>
    </table>

  </div>

</div>